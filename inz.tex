\documentclass[12pt]{article}

\usepackage{amssymb} % symbol kąta
\usepackage[polish]{babel} % polskie nazwy
\usepackage[T1]{fontenc} % polskie znaki
\usepackage[margin=1.0in]{geometry} % marginesy
\usepackage[utf8]{inputenc}
\usepackage{listingsutf8} % bloki kodu
\usepackage{color} % kolory
\usepackage{indentfirst} % wcięcie w pierwszej linii paragrafu
\usepackage{graphicx} % obrazy
\usepackage{float} % dla image [H]
\usepackage{amsmath,amsthm,amssymb,mathtools} % matematyka dowód
\usepackage{changepage} % matematyka dowód
\usepackage{siunitx} % wyrównanie do kropki
\usepackage{makecell} % wyrównania nagłówków
\usepackage{hyperref} % bez obwódek wokół linków
\hypersetup{
	colorlinks,
	citecolor=black,
	filecolor=black,
	linkcolor=black,
	urlcolor=magenta
}

% bez odstępu w itemize
\let\tempone\itemize
\let\temptwo\enditemize
\renewenvironment{itemize}{\tempone\setlength{\itemsep}{0cm}}{\temptwo}

\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}  
\graphicspath{ {img/} }
% obrazek {nazwa.png}{opis}
\newcommand{\imgcustomsize}[3]{
	\begin{figure}[H]
		\centering
		\includegraphics[width=#3\textwidth]{#1}
		\caption{#2}
	\end{figure}
}
\newcommand{\img}[2]{\imgcustomsize{#1}{#2}{0.7}}

% bez opisu
\newcommand{\imgnocap}[1]{
	\begin{figure}[H]
		\centering
		\includegraphics[width=0.6\textwidth]{#1}
	\end{figure}
}

% dwa obrazki
% \imgsidebyside{1}{opis 1}{2}{opis 2}
\newcommand{\imgsidebyside}[4]{
	\begin{figure}[H]
		\centering
		\begin{minipage}{.45\textwidth}
			\centering
			\includegraphics[width=1\linewidth]{#1}
			\caption{#2}
		\end{minipage}%
		\hfill
		\begin{minipage}{.45\textwidth}
			\centering
			\includegraphics[width=1\linewidth]{#3}
			\caption{#4}
		\end{minipage}
	\end{figure}
}

% tabela z wynikami {nazwa.txt}{opis}
\newcommand{\tab}[2]{
	\begin{table}[H]
		\centering
		\caption{#2}
		\vspace{0.3cm}
		\input{#1}
	\end{table}
}

% nagłowek tabeli bold
\renewcommand\theadfont{\bfseries}

\begin{document}
	\lstset{backgroundcolor=\color{lbcolor}, language=Python, inputencoding=utf8}
	
	\title{Odbiornik internetowych stacji radiowych \\
		\vspace{0.2cm}
		\large Praca Inżynierska \\
		\large ...}
	\author{Norbert Morawski}
	
	\maketitle
	\tableofcontents
	\pagebreak
	
	\section{Wizja}
	
	\subsection{Informacje ogólne}
		Temat mojej pracy inżynierskiej brzmi \textit{Odbiornik internetowych stacji radiowych}. Radio internetowe staje się co raz popularniejsze. Wolność transmisji, brak regulacji i ograniczeń pasma radiowego powoduje, że wiele niezależnych stacji radiowych wybiera to medium przekazu. Urządzenie ma być zrealizowane na platformie wbudowanej, opartej o mikrokontroler.
		
		\paragraph{Klient}
		Klientem jest promotor. Innych osób w projekcie nie ma.
		
		\paragraph{Nazwa kodowa}
		Jako, że planuję uruchomić radio na platformie Raspberry Pi Pico projekt zyskał nazwę kodową \textbf{Pico-radio}.
		
	\subsection{Problem}
		Poprzednie urządzenia tego typu powstałe na uczelni używały relatywnie drogiej płytki \textit{STM32F746G-Disco} kosztującej 389 zł \textsuperscript{\cite{botland_stm}}. Zawiera ona wyświetlacz.
		\img{botland_stm}{Droga płytka STM}
		
		Ceny komercyjnych 'adapterów' radia internetowego zaczynają się od ok. 330 zł za produkt powystawowy \textsuperscript{\cite{allegro_adapter}}
		\img{allegro_adapter}{Adapter radia internetowego}
		
		Wieże z wbudowaną opcją radia internetowego to koszt rzędu 230 zł za najtańszy produkt z głośnikiem mono \textsuperscript{\cite{xkom_tanie}} lub ok. 370 zł za wersję stereo \textsuperscript{\cite{xkom_drogie}}
		\imgsidebyside{xkom_tanie}{Radio internetowe mono}{xkom_drogie}{Radio internetowe stereo}
		
		\subsubsection{Rozwiązanie}
		\imgcustomsize{radio_proj_trimmed}{Projekt wizualny radia (z zachowanymi proporcjami)}{0.9}
		
%		Moja propozycja to wykorzystanie relatywnie taniej płytki \textit{Raspberry Pi Pico W} w cenie 35,90 zł \textsuperscript{\cite{botland_pi_pico}}.
%		\img{botland_pi_pico}{Tania płytka Raspberry Pi Pico}
		
		Chciałbym aby końcowy produkt był kompletnym radiem. Poniżej przedstawiam uproszczony schemat blokowy.
		\imgcustomsize{PicoRadio_blocks}{Schemat blokowy radia}{1}
		
		\pagebreak
		Chciałbym użyć relatywnie taniej płytki \textit{Raspberry Pi Pico W} w cenie 35,90 zł \textsuperscript{\cite{botland_pi_pico}}.
		\img{botland_pi_pico}{Tania płytka Raspberry Pi Pico}	
		
		Zamierzam zastosować graficzny wyświetlacz o przekątnej 1.8" \textsuperscript{\cite{botland_wysw}}.
		\img{botland_wysw}{Graficzny wyświetlacz 1.8 cala}
		Sterowanie będzie odbywało się za pomocą 5 przycisków (joystick + zatwierdź).
		
		Jako wzmacniacz mocy zastosowałbym tani moduł ze sklepu Botland \textsuperscript{\cite{botland_amp}}.
		\img{botland_amp}{Wzmacniacz mocy stereo 3W}
		
		Głośniki będą pełnozakresowe w konfiguracji stereo zakupione na Allegro. \textsuperscript{\cite{allegro_glosnik}}
		\img{allegro_glosnik}{Głośnik 3W}
		
		Zasilanie zamierzam zrobić bateryjne z wykorzystaniem ogniwa Li-Pol o pojemności 4000mAh. Pozwoliłoby to na ok. 4h słuchania prze głośności 50\% \textsuperscript{\cite{botland_aku}}. Potrzebna będzie też ładowarka. \textsuperscript{\cite{botland_aku_chg}}
		\imgsidebyside{botland_aku}{Ogniwo Li-Pol}{botland_aku_chg}{Ładowarka}
		
		Obudowę zamierzam zaprojektować i wydrukować na drukarce 3D. Ewentualnie biorę pod uwagę możliwość zakupu obudowy uniwersalnej.
		
	\subsubsection{Koszt projektu}
	\begin{table}[H]
		\centering
		\caption{aa}
		\vspace{0.3cm}
		\begin{tabular}{r|S}
			Pico W&35.90 zł\\
			Wyświetlacz&39.00 zł\\
			Wzmacniacz&2.70 zł\\
			Głośniki&77.68 zł\\
			Ogniwo Li-Pol&39.90 zł\\
			Ładowarka&6.30 zł\\
			\textbf{Suma}&201.48 zł
		\end{tabular}
	\end{table}

	Jest to około 170 zł mniej niż radio internetowe stereo pokazane wyżej. Oczywiście jest to tylko zgrubne oszacowanie. Końcowy koszt projektu na pewno będzie wyższy.
		
	\subsection{Wymagania funkcjonalne}
		Główną funkcją budowanego urządzenia ma być możliwość odtwarzania radia internetowego. \paragraph{Wymagane funkcjonalności (oprócz odtwarzania)}
		\begin{itemize}
			\item wstrzymywanie odtwarzania
			\item prezentacja na zintegrowanym wyświetlaczu aktualnego stanu
			\item regulacja głośności odtwarzania
			\item lista stacji
			\item lista ulubionych stacji
		\end{itemize}
		
		\paragraph{Dodatkowe funkcjonalności (niewymagane)}
		\begin{itemize}
			\item odtwarzanie plików z nośnika przenośnego
		\end{itemize}
	
		\paragraph{Oczekiwany produkt}
		\begin{itemize}
			\item W pełni funkcjonalny prototyp urządzenia realizującego funkcje odbiornika internetowych stacji radiowych.
			\item Dokumentacja techniczna pozwalająca na zbudowanie urządzenia oraz rozwój jego oprogramowania układowego.
		\end{itemize}
	
	\subsection{Wymagania niefunkcjonalne}
		Płytka rozwojowa powinna obsługiwać WiFi (do pobierania strumienia danych audio z serwera). Mikrokontroler musi poradzić sobie z dekodowaniem formatu MP3 lub AAC w czasie rzeczywistym.
		
	\subsection{Koncepcja technologiczna}
		Oprogramowanie będzie napisane w języku C++ z wykorzystaniem środowiska \textit{pico-sdk} \textsuperscript{\cite{pico_sdk}}. 
		
	\subsection{Ryzyko}
		Największym ryzykiem jest brak wystarczającej mocy obliczeniowej lub brak odpowiednich bibliotek do dekodowania formatów potrzebnych do odtworzenia dźwięku ze strumienia audio. Napisanie kodeka MP3 nie wchodzi w grę z powodu ograniczonego czasu na projekt. Zmiana płytki na droższą mija się z założeniami projektu. Rozwiązaniem może być użycie sprzętowego kodeka audio MP3 np. VS1003.
		\img{botland_mp3}{Sprzętowy dekoder MP3}
		Jego zastosowanie tylko nieznacznie powiększa koszty projektu, ale znacznie odciąża mikrokontroler.
		
	\subsection{Plan prac}
		Część prac została już wykonana i przetestowana:
		\begin{itemize}
			\item Wykonanie odtwarzacza nieskompresowanego dźwięku
			\item Próba dekodowania MP3 na mikrokontrolerze (sukces)
		\end{itemize}
	
		W obecnej formie mam działający odtwarzacz plików MP3 z karty SD. Na teraz planuję dołączenie do niego stosu WiFi i odtworzenie strumienia dźwięku z internetu. Niestety nigdy nie interesowałem się radiem internetowym i zasadą jego działania.
		
		\paragraph{Prototyp}
		Do 24 maja chciałbym mieć zrobiony odtwarzacz z zapisaną na stałe jedną/paroma ścieżkami do strumieni audio. Muszę zgłębić zasadę działania radia internetowego i wypróbować odtwarzanie takiego strumienia na Pi Pico. Muszę także napisać/wykorzystać dostępne w internecie implementacje klienta HTTP działające na Pi Pico (co po wstępnym przejrzeniu dostępnych rozwiązań może skończyć się implementacją własnego klienta HTTP)
		
		\paragraph{Wersja alpha}
		Do tego czasu chciałbym mieć zmontowane wszystko z części powyżej + podstawowa obsługa wyświetlacza i przycisków. Planuję także mieć już większość implementacji za sobą. Tzn. odtwarzanie radia z listy stacji wybieranych z wyświetlacza.
		
		\paragraph{Dalsza perspektywa}
		Planuję także zaprojektować płytkę drukowaną do mojego projektu. Wykonam też obudowę techniką druku 3D. Tą część projektu zostawiam na wakacje po tym semestrze.
		
	\section{Projekt interfejsu i interakcji z użytkownikiem}
	\imgcustomsize{interface/1flow}{Przemieszczanie się pomiędzy ekranami}{0.9}
	W trakcie projektowania ekranów konieczne stało się założenie użycia 5 przycisków. Cztery z nich zostaną użyte do nawigacji prawo/lewo/góra/dół, a pozostały (środkowy) do wykonania wybranej akcji.
		 
	
	
	\pagebreak
	\begin{thebibliography}{9}
		\bibitem{botland_stm}
		\href{https://botland.com.pl/stm32-discovery/4715-stm32f746g-disco-discovery-stm32f746ng-cortex-m7-ekran-dotykowy-pojemnosciowy-43--5904422374082.html}{\textit{STM32F746G-Disco} -- Sklep Botland}
		
		\bibitem{allegro_adapter}
		\href{https://allegro.pl/oferta/adapter-radia-internetowego-dual-ir-3a-dab-fm-rds-12692108793}{\textit{Radio sieciowe} -- Sklep Allegro}
		
		\bibitem{xkom_tanie}
		\href{https://www.x-kom.pl/p/653480-radio-internetowe-technisat-sternradio-ir-2-biale.html}{\textit{Radio internetowe mono} -- Sklep x-kom}
		
		\bibitem{xkom_drogie}
		\href{https://www.x-kom.pl/p/724674-radio-internetowe-blaupunkt-ir10bt.html}{\textit{Radio internetowe stereo} -- Sklep }
		
		
		\bibitem{botland_pi_pico}
		\href{https://botland.com.pl/moduly-i-zestawy-do-raspberry-pi-pico/21574-raspberry-pi-pico-w-rp2040-arm-cortex-m0-cyw43439-wifi-5056561803173.html}{\textit{Raspberry Pi Pico W} -- Sklep Botland}
		
		\bibitem{botland_wysw}
		\href{https://botland.com.pl/wyswietlacze-lcd-tft-i-ips/10754-wyswietlacz-lcd-tft-kolorowy-18-128x160px-spi-waveshare-13892-5904422316600.html}{\textit{Wyświetlacz 1.8 cala} -- Sklep Botland}
		
		\bibitem{botland_amp}
		\href{https://botland.com.pl/odtwarzacze-mp3-wav-ogg-midi/6641-wzmacniacz-audio-stereo-pam8403-5v-3w-dwukanalowy-zielony-5904422359850.html}{\textit{Wzmacniacz mocy 2x3W} -- Sklep Botland}
		
		\bibitem{allegro_glosnik}
		\href{https://allegro.pl/oferta/glosnik-pelnozakresowy-4ohm-3w-5cm-diy-lekki-10744973650}{\textit{Głośnik pełnozakresowy} -- Sklep Allegro}
		
		\bibitem{botland_aku}
		\href{https://botland.com.pl/akumulatory-li-pol-1s-37v/15644-akumulator-li-pol-akyga-4000mah-1s-37v-zlacze-jst-bec-gniazdo-80x50x8mm-5904422343644.html}{\textit{Akumulator Li-Pol} -- Sklep Botland}
		
		\bibitem{botland_aku_chg}
		\href{https://botland.com.pl/moduly-ladowania-lipol-usb-micro-usb/6944-ladowarka-li-pol-tp4056-pojedyncza-cela-1s-37v-microusb-z-zabezpieczeniami-5904422375355.html}{\textit{Ładowarka Li-Pol} -- Sklep Botland}
		
		\bibitem{pico_sdk}
		\href{https://github.com/raspberrypi/pico-sdk}{\textit{pico-sdk} -- Zestaw bibliotek do Raspberry Pi Pico}
		
		

%		\bibitem{allegro_adapter}
%		\href{}{\textit{e} -- Sklep }
	\end{thebibliography}
	
\end{document}
